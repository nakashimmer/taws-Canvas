<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>4</title>
		<style>
			canvas{border:1px dotted gray;margin:10px auto;display:block;}
		</style>
	</head>
	<body>
		<!-- ②HTMLの記述場所 -->
		<canvas id="canvas1" width="310" height="320"></canvas>
		<script>
			//③JavaScriptの記述場所
			const CANVAS1=document.getElementById("canvas1");
			const CTX1=canvas1.getContext("2d");
			const POS={x:150,y:150};
			let f=false;

			CANVAS1.addEventListener(
				"mousemove",
				(e)=>{
					const RECT = e.target.getBoundingClientRect();
					POS.x = e.clientX - RECT.left;
					POS.y = e.clientY - RECT.top;
					if(f===true){
						CTX1.fillStyle="red";
						CTX1.fillRect(POS.x-2, POS.y-2, 4, 4);
					}
				}
			);

			CANVAS1.addEventListener("mousedown", ()=>{f=true;});
			CANVAS1.addEventListener("mouseup", ()=>{f=false;});
		</script>
	</body>
</html>